From 00f0078808fa4e33cf4a5f1d88f33c121828a735 Mon Sep 17 00:00:00 2001
From: Robert Ancell <robert.ancell@gmail.com>
Date: Wed, 2 Jun 2010 09:43:47 +1000
Subject: [PATCH] Use gdk_screen_get_system_colormap with gdk_screen_get_system_visual as gdk_screen_get_default_colormap can return a colormap that is incompatible.

---
 src/ui/ui.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

Index: metacity-2.30.1/src/ui/ui.c
===================================================================
--- metacity-2.30.1.orig/src/ui/ui.c	2010-03-31 01:35:40.000000000 +1100
+++ metacity-2.30.1/src/ui/ui.c	2010-06-02 09:52:38.250014076 +1000
@@ -166,7 +166,7 @@
   gint attributes_mask;
   GdkWindow *window;
   GdkVisual *visual;
-  GdkColormap *cmap = gdk_screen_get_default_colormap (screen);
+  GdkColormap *cmap = gdk_screen_get_system_colormap (screen);
   
   /* Default depth/visual handles clients with weird visuals; they can
    * always be children of the root depth/visual obviously, but
